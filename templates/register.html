{% extends "base.html" %}

{% block content %}
<div style="max-width: 500px; margin: 0 auto; text-align: center;">
    
    <!-- Welcome Info -->
    <div class="register-info" style="margin-bottom: 30px;">
        <h2 style="font-size: 24px; margin-bottom: 10px; color: #2c3e50;">🚀 {{ _('Join Job Portal') }}</h2>
        <p style="font-size: 16px; color: #555;">{{ _('Discover and apply for top job opportunities across the World.') }}</p>

        <ul style="list-style: none; padding: 0; margin-top: 20px; text-align: left;">
            <li style="margin-bottom: 8px;">✅ <strong>{{ _('Apply for jobs') }}</strong> {{ _('with one click') }}</li>
            <li style="margin-bottom: 8px;">✅ <strong>{{ _('Create a professional profile') }}</strong> {{ _('to stand out') }}</li>
            <li style="margin-bottom: 8px;">✅ <strong>{{ _('Get job alerts') }}</strong> {{ _('via email') }}</li>
            <li style="margin-bottom: 8px;">✅ <strong>{{ _('Post jobs') }}</strong> {{ _('as an employer') }}</li>
        </ul>

        <p style="font-weight: bold; margin-top: 20px; font-size: 15px;">{{ _("It's free and only takes a minute!") }}</p>
    </div>

    <!-- Register Form -->
    <form method="POST" action="{{ url_for('register') }}" style="display: flex; flex-direction: column; gap: 10px; text-align: left;">
        <h3 style="margin-bottom: 10px; text-align: center;">📝 {{ _('Register') }}</h3>

        <!-- Role Selection -->
        <label for="role" style="font-weight: bold;">{{ _('I am a:') }}</label>
        <select name="role" id="role" required style="padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
            <option value="jobseeker">👤 {{ _('Job Seeker') }}</option>
            <option value="employer">🏢 {{ _('Employer') }}</option>
        </select>

        <input type="text" name="username" placeholder="{{ _('Username') }}" required style="padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
        <input type="email" name="email" placeholder="{{ _('Email') }}" required style="padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
        <input type="password" name="password" placeholder="{{ _('Password') }}" required style="padding: 10px; border-radius: 5px; border: 1px solid #ccc;">

        <button type="submit" style="padding: 10px; background-color: #2c3e50; color: white; border: none; border-radius: 5px; cursor: pointer;">
            {{ _('Register') }}
        </button>
    </form>

    <script>
    function sendLocationToServer(lat, lng) {
        fetch("/save_location", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ latitude: lat, longitude: lng })
        });
    }

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            position => {
                sendLocationToServer(position.coords.latitude, position.coords.longitude);
            },
            error => {
                console.warn("Location error:", error.message);
                // Optional fallback: use IP-based geolocation or default
            }
        );
    } else {
        console.warn("Geolocation not supported by this browser.");
    }
</script>

    <!-- Bottom Link -->
    <p style="margin-top: 20px;">{{ _('Already have an account?') }} <a href="{{ url_for('login') }}">{{ _('Log in here') }}</a>.</p>
</div>
{% endblock %}
